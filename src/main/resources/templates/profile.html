<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="/images/Logo Glass Large.png">
    <title>User Profile</title>

    <!-- Bootstrap -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body class="bg-light">
<div class="container mt-5">

    <!-- Profile Card -->
    <div class="card shadow p-4">

        <h2 class="mb-4 text-center">Profile</h2>

        <!-- Shared User Fields -->
        <div class="mb-3">
            <label class="form-label fw-bold">Full Name</label>
            <p th:text="${user.FName}" class="form-control-plaintext"></p>
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Email</label>
            <p th:text="${user.email}" class="form-control-plaintext"></p>
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Role</label>
            <p th:text="${type}" class="form-control-plaintext text-capitalize"></p>
        </div>

        <hr>

        <!-- Student Fields -->
        <div th:if="${type == 'student'}">

            <h4 class="text-primary mb-3">Student Details</h4>

            <div class="mb-3">
                <label class="form-label fw-bold">Major</label>
                <p th:text="${student.studentMajor}" class="form-control-plaintext"></p>
            </div>

            <div class="mb-3">
                <label class="form-label fw-bold">Year</label>
                <p th:text="${student.graduatingYear}" class="form-control-plaintext"></p>
            </div>

            <div class="mb-3">
                <label class="form-label fw-bold">University</label>
                <p th:text="${student.uniName}" class="form-control-plaintext"></p>
            </div>
            <!-- CV Section -->
            <h4 class="text-primary mb-3">Curriculum Vitae</h4>

            <div th:if="${student.cv != null}">

                <div class="card bg-light p-3 mb-3">

                    <div class="mb-3">
                        <label class="form-label fw-bold">Professional Summary</label>
                        <p th:text="${student.cv.description}" class="form-control-plaintext"></p>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Past Experiences</label>
                        <p th:text="${student.cv.pastExperiences}"
                           class="form-control-plaintext"
                           style="white-space: pre-wrap;"></p>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Projects</label>
                        <p th:text="${student.cv.projects}"
                           class="form-control-plaintext"
                           style="white-space: pre-wrap;"></p>
                    </div>

                </div>

                <div class="d-flex gap-2">
                    <a href="/cv" class="btn btn-warning btn-sm">
                        <i class="bi bi-pencil"></i> Edit CV
                    </a>
                </div>

            </div>

            <div th:if="${student.cv == null}">
                <p class="text-muted mb-3">You haven't created a CV yet.</p>
                <a href="/cv" class="btn btn-success">
                    <i class="bi bi-plus-circle"></i> Create CV
                </a>
            </div>


        </div>

        <!-- Recruiter Fields -->
        <div th:if="${type == 'recruiter'}">

            <h4 class="text-primary mb-3">Recruiter Details</h4>

            <div class="mb-3">
                <label class="form-label fw-bold">Position</label>
                <p th:text="${recruiter.title}" class="form-control-plaintext"></p>
            </div>

            <div class="mb-3">
                <label class="form-label fw-bold">Companies</label>
                <div th:if="${recruiter.companies.get(0) != null and !recruiter.companies.isEmpty()}">
                    <table class="table table-sm">
                        <thead>
                        <tr>
                            <th>Company Name</th>
                            <th>Industry</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="company : ${recruiter.companies}">
                            <td th:text="${company.name}">Company Name</td>
                            <td th:text="${company.industry}">Industry</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <p th:if="${recruiter.companies.get(0) == null or recruiter.companies.isEmpty()}"
                   class="form-control-plaintext text-muted">
                    - You're not working for any company.
                </p>
            </div>

        </div>
        <!-- Admin Fields -->
        <div th:if="${type == 'admin'}">
            <h4 class="text-primary mb-3">Admin Details</h4>
        </div>
        <hr>

        <!-- Buttons -->
        <div class="d-flex justify-content-between mt-4">

            <a href="/" class="btn btn-secondary">Back to Dashboard</a>

<!--            <a th:href="@{'/profile/edit'}" class="btn btn-primary">Edit Profile</a>-->

        </div>

    </div>
</div>
</body>
</html>